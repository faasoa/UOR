<!DOCTYPE html>
<html lang="fr">

  <head>
    <meta charset="utf-8">
    <title>Kitesurf, matos et vent.</title>

    <!-- Métadonnées basiques-->
    <meta name="author" content="Robin Clerc">
    <meta name="description" content="Kitesurf - description du matériel et du vent. Exercice du cours Utilisation d'ordinateurs en réseau L1 IED ParisVIII.">
    <link rel="Shortcut Icon" href="image/favicon.png" type="image/x-icon">

    <!-- Métadonnées Open Graph -->
    <meta property="og:image" content="image/opengraph_preview_c.jpg">
    <meta property="og:description" content="Kitesurf - description du matériel et du vent. Exercice du cours Utilisation d'ordinateurs en réseau L1 IED ParisVIII.">
    <meta property="og:title" content="Kitesurf, matos et vent.">

    <!-- Métadonnées Dublin Core -->
    <meta name="DC.Title" content="Kitesurf, matos et vent.">
    <meta name="DC.Creator" content="Robin Clerc">
    <meta name="DC.Subject" content="Quelques bases du Kitesurf : matériel, vent.">
    <meta name="DC.Desription" content="Kitesurf - description du matériel et du vent. Exercice du cours Utilisation d'ordinateurs en réseau L1 IED ParisVIII.">
    <meta name="DC.Publisher" content="Robin Clerc">
    <meta name="DC.Contributor" content="Robin Clerc">
    <meta name="DC.Date" content="2021-07-26">
    <meta name="DC.Type" content="Text">
    <meta name="DC.Format" content="text/html">
    <meta name="DC.Identifier" content="https://vaned-crusts.000webhostapp.com/">
    <meta name="DC.Language" content="fr">
    <meta name="DC.Source" content="https://fr.wikipedia.org/wiki/Kitesurf">
    <meta name="DC.Relation" content="https://fr.wikipedia.org/wiki/Kitesurf">
    <meta name="DC.Coverage" content="2015-2025">
    <meta name="DC.Rights" content="https://www.gnu.org/licenses/gpl-3.0.html">

    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="style.css">
  </head>

  <body>
    <header>
      <h1 id="titre_page">Le kitesurf</h1>
    </header>
    <nav>
      <ul>
        <li><a href="https://imidic-allowance.000webhostapp.com/">Exercice 1.1</a></li>
        <li><a href="index.html">Exercice 2.1</a></li>
        <li><a href="index_avec_css.html">Exercice 3.1</a></li>
        <li><a href="index_avec_css_valide.html">Exercice 3.1.1</a></li>
        <li><a href="formulaire.php">Exercice 4.1</a></li>
        <li><a class="page_active" href="javascript.php">Exercice 6.1</a></li>
      </ul>
    </nav>
    <section>
      <video controls class="ombrage">
        <source src="video/kitesurf-pexels-michal-polak.mp4" type="video/mp4">
        <p>
          Vu depuis la plage, des pratiquants de kitesurf sur la mer. Le premier surf une vague.
        </p>
      </video>
      <p class="source">
        Source vidéo : <a href="https://www.pexels.com/@michal-polak-studio78-70315077?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels">Michał Polak studio78</a> via <a href="https://www.pexels.com/">Pexels</a>.
      </p>
      <h2>Le matériel</h2>
      <dl>
        <dt>Le kite</dt>
        <dd>ou l'aile, le cerf-vollant. Comme une voile de bateau, utilise la force du vent pour propulser l'utilisateur.
          <dl>
            <div class="deux-colonnes">
              <dt>Aile à boudins</dt>
              <dd>Redécolle facilement après une chute dans l'eau.<img src="image/aile_boudin.jpg" alt="Une aile de kitesurf à boudin." class="ombrage">
                <p class="source">Source image : <a href="https://freeimages.com/photographer/Tiara-43096">Natalia Karguina</a> via <a href="https://freeimages.com">FreeImages</a>.</p>
              </dd>
            </div>
            <div class="deux-colonnes">
              <dt>Aile à caisson</dt>
              <dd>Puissante et légère, idéale pour un pilote expérimenté et le petit temps. <img src="image/aile_caisson.jpg" alt="Une personne qui fait du kite avec une aile à caisson." class="ombrage">
                <p class="source">Source image : <a href="https://unsplash.com/@uniqsurface">uniqsurface</a> via <a href="https://unsplash.com/">Unsplash</a>.</p>
              </dd>
            </div>
          </dl>
        </dd>
        <dt style="clear: both">La barre</dt>
        <dd>C'est le système de commande de l'aile. Le pilote peut faire tourner l'aile à gauche ou à droite, et border ou choquer l'aile, ce qui augmente ou diminue la force exercée. C'est aussi le principal équipement de sécurité, permetant de couper la puissance en un instant, voir même de tout larguer. <img src="image/bar.jpg" alt="Une personne qui fait du kite sur la plage et tient la barre à deux mains." class="ombrage"> 
          <p class="source">Source image : <a href="https://tarifa.grayactiva.com/">Graykite Tarifa</a> via <a href="https://en.wikipedia.org/wiki/File:Happy-students-3_(cropped).jpg#filelinks">Wikimedia</a>.</p>
        </dd>
        <dt>La planche</dt>
        <dd>Permet à l'utilisateur de se mettre debout, de contrôler sa direction.
          <dl>
            <div class="deux-colonnes">
              <dt>Twin-Tip</dt>
              <dd>Inspiré du Wakeboard. Planche symétrique avec des fixations pour les pieds, si elle a des ailerons ils sont petits. Elle permet d'aller dans un sens ou dans l'autre sans repositionner ses pieds, ce qui la rend accessible aux débutants. <img src="image/twintip.jpg" alt="Un kitesurfeur pendant un saut, on voit le dessous de sa planche twintip." class="ombrage"> 
                <p class="source">Source image : <a href="https://unsplash.com/@jeisblack">Jason Blackeye</a> via <a href="https://unsplash.com/">Unsplash</a>.</p>
              </dd>
            </div>
            <div class="deux-colonnes">
              <dt>Surf</dt>
              <dd>Même forme mais plus petit qu'un surf. Une sensation différente qui la rend agréable dans les vagues. <img src="image/surf.jpg" alt="Un kitesurfeur avec une planche de surf fait un virage dans une vague." class="ombrage"> 
                <p class="source">Source image : <a href="https://unsplash.com/@renan_brun">Renan Brun</a> via <a href="https://unsplash.com/">Unsplash</a>.</p>
              </dd>
            </div>
            <div>
              <dt style="clear:both;">Foil</dt>
              <dd>Ou aile d'eau. Quand il se déplace, le foil porte la planche hors de l'eau, ce qui réduit considérablement les frottements et provoque une sensation unique. Pour les utilisateurs avancés, qui l'accompagnent d'une aile à caisson pour naviguer avec très peu de vent. <img src="image/foil.jpg" alt="Une planche avec son foil posée sur le coté, derrière une voiture." class="ombrage"> 
                <p class="source">Source image : <a href="https://unsplash.com/@mael_balland">Mael Balland</a> via <a href="https://unsplash.com/">Unsplash</a>.</p>
              </dd>
            </div>
          </dl>
        </dd>
      </dl>
      <h2>Le vent</h2>
      <div style="float: left;">
        Pour des raisons de <em>sécurité</em> le vent idéal est
        <ul>
          <li>stable, c'est à dire d'une intensité qui varie pas ou peu, non rafaleux.</li>
          <li>d'une intensité raisonnable. Les vents forts laissent peu de marge à l'erreur.</li>
          <li>ne pas être off-shore (depuis la terre vers le plan d'eau) pour un débutant qui va dériver.</li>
        </ul>
      </div>
      <table id="tableau_vent" class="ombrage">
        <caption>Vitesses du vent en 3 unités courantes. Source <a href="https://fr.wikipedia.org/wiki/%C3%89chelle_de_Beaufort">Wikipédia</a>.</caption>
        <tr>
          <th>Beaufort</th>
          <th>Noeuds</th>
          <th>Km/h</th>
        </tr>
        <tr>
          <td style="background-color:royalblue; text-align: center;">3</td>
          <td>7 à 10</td>
          <td>12 à 19</td>
        </tr>
        <tr>
          <td style="background-color:seagreen; text-align: center;">4</td>
          <td>11 à 16</td>
          <td>20 à 28</td>
        </tr>
        <tr>
          <td style="background-color:seagreen; text-align: center;">5</td>
          <td>17 à 21</td>
          <td>29 à 38</td>
        </tr>
        <tr>
          <td style="background-color:seagreen; text-align: center;">6</td>
          <td>22 à 27</td>
          <td>39 à 49</td>
        </tr>
        <tr>
          <td style="background-color:orange; text-align: center;">7</td>
          <td>28 à 33</td>
          <td>50 à 61</td>
        </tr>
        <tr>
          <td style="background-color:firebrick; text-align: center;">8</td>
          <td>34 à 40</td>
          <td>62 à 74</td>
        </tr>
      </table>
      <h2 style="clear: both;">Note ton spot</h2>
      <p>Tu te sens seul sur ton spot? C'est l'occasion de le partager.</p>
      <form action="formulaire/javascript_post.php" method="POST">
        <label for="pseudo">Pseudo</label><input type="text" name="pseudo" id="pseudo" required placeholder="Pseudo">
        <label for="mail">Adresse mail</label><input type="email" name="mail" id="mail" required placeholder="Adresse mail">
        <label for="nom_spot">Nom du spot</label><input type="text" name="nom_spot" id="nom_spot" required placeholder="Nom du spot">
        <label for="date_visite">Dernière visite du spot</label><input type="date" name="date_visite" id="date_visite" required>
        <label for="commentaire">Commentaire</label><textarea name="commentaire" id="commentaire" required>Par là le blabla</textarea>
        <input type="submit" value="Envoyer">
      </form>
      
      <div id="commentaires">
        <?php
          // Pas de détail d'erreur
          error_reporting(0);

          // Connexion à la BDD
          require("formulaire/connexion_bdd.php");

          // Requête SQL
          $commentaires = $bdd->query('SELECT pseudo, mail, DATE_FORMAT(date_creation, \'%d/%m/%Y à %Hh%imin\') AS date_creation_formate, nom_spot, date_visite, commentaire FROM kitesurf ORDER BY id DESC LIMIT 0,20');

          // Itérer sur chaque ligne de la requête
          while ($donnees = $commentaires->fetch())
          {
        ?>
          <div class="comm">
            <div class="comm_contenu">
              <div style="width: 100%;">Spot : <?php echo $donnees['nom_spot'];?> visité le <?php echo $donnees['date_visite'];?> :</div>
              <?php echo $donnees['commentaire'];?>
            </div>
            <div class="comm_auteur">
              <?php echo $donnees['pseudo'] . ' (<a href="mailto:' . $donnees['mail'] . '">' . $donnees['mail'] . '</a>) le ' . $donnees['date_creation_formate'];?>
            </div>
          </div>
        <?php
          }
          // Ferme la requête
          $commentaires->closeCursor();
        ?>
      </div>

      <h2>Pas de vent ?</h2>
      <div id="casse_brique">
        <p>Passe le temps avec un petit jeu. Contrôles : &#8592; gauche et &#8594; droite sur le clavier, ou avec la souris. Indisponible sur mobile. <button type="button" id="bouton_jouer">Jouer</button></p>

        <canvas id="myCanvas" width="480" height="320"></canvas>

        <script>
          var canvas = document.getElementById("myCanvas");
          var ctx = canvas.getContext("2d");

          var x = canvas.width/2;
          var y = canvas.height-30;
          var dx = 2;
          var dy = -2;
          var ballRadius = 10;

          var paddleHeight = 10;
          var paddleWidth = 75;
          var paddleX = (canvas.width - paddleWidth) / 2;

          var rightPressed = false;
          var leftPressed = false;

          var brickRowCount = 3;
          var brickColumnCount = 5;
          var brickWidth = 75;
          var brickHeight = 20;
          var brickPadding = 10;
          var brickOffsetTop = 30;
          var brickOffsetLeft = 30;

          var bricks = [];
          for(var c = 0; c < brickColumnCount; c++) {
            bricks[c] = [];
            for(var r = 0; r < brickRowCount; r++) {
              bricks[c][r] = { x: 0, y: 0, status: 1 };
            }
          }

          var score = 0;
          var lives = 3;

          var bouton_jouer = document.getElementById("bouton_jouer");

          document.addEventListener("keydown", keyDownHandler, false);
          document.addEventListener("keyup", keyUpHandler, false);
          document.addEventListener("mousemove", mouseMoveHandler, false);
          bouton_jouer.addEventListener("click", jouer, false);

          function keyDownHandler(e) {
            if(e.key == "Right" || e.key == "ArrowRight") {
              rightPressed = true;
            }
            else if(e.key == "Left" || e.key == "ArrowLeft") {
              leftPressed = true;
            }
          }
          
          function keyUpHandler(e) {
            if(e.key == "Right" || e.key == "ArrowRight") {
              rightPressed = false;
            }
            else if(e.key == "Left" || e.key == "ArrowLeft") {
              leftPressed = false;
            }
          }

          function mouseMoveHandler(e) {
            var relativeX = e.clientX - canvas.offsetLeft;
            if(relativeX > 0 && relativeX < canvas.width) {
              paddleX = relativeX - paddleWidth / 2;
            }
          }

          function jouer() {
            draw();
          } 

          function drawBall() {
            ctx.beginPath();
            ctx.arc(x, y, ballRadius, 0, Math.PI*2);
            ctx.fillStyle = "#A34C39";
            ctx.fill();
            ctx.closePath();
          }

          function drawPaddle() {
            ctx.beginPath();
            ctx.rect(paddleX, canvas.height - paddleHeight, paddleWidth, paddleHeight);
            ctx.fillStyle = "#A34C39";
            ctx.fill();
            ctx.closePath();
          }

          function drawBricks() {
            for(var c = 0; c < brickColumnCount; c++) {
              for(var r = 0; r < brickRowCount; r++) {
                if(bricks[c][r].status ==1){
                  var brickX = (c * (brickWidth + brickPadding)) + brickOffsetLeft;
                  var brickY = (r * (brickHeight + brickPadding)) + brickOffsetTop;
                  bricks[c][r].x = brickX;
                  bricks[c][r].y = brickY;
                  ctx.beginPath();
                  ctx.rect(brickX, brickY, brickWidth, brickHeight);
                  ctx.fillstyle = "#A34C39";
                  ctx.fill();
                  ctx.closePath();
                }
              }
            }
          }

          function drawScore() {
            ctx.font = "16px atkinson_hyperlegible";
            ctx.fillStyle = "#A34C39";
            ctx.fillText("Score: " + score, 8, 20);
          }

          function drawLives() {
            ctx.font = "16px atkinson_hyperlegible";
            ctx.fillStyle = "#A34C39";
            ctx.fillText("Lives: " + lives, canvas.width - 65, 20);
          }

          function collisionDetection() {
            for(var c = 0; c < brickColumnCount; c++) {
              for(var r = 0; r < brickRowCount; r++) {
                var b = bricks[c][r];
                if(b.status == 1) {
                  if(x > b.x && x < b.x + brickWidth && y > b.y && y < b.y + brickHeight) {
                    dy = -dy;
                    b.status = 0;
                    // Incrémente le score
                    score ++;
                    // Quand toutes les briques sont cassées = victoire
                    if(score == brickRowCount * brickColumnCount) {
                      alert("Victoire !");
                      document.location.reload();
                    }
                  }
                }
              }
            }
          }

          function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawBricks();
            drawBall();
            drawPaddle();
            collisionDetection();
            drawScore();
            drawLives();

            x += dx;
            y += dy;

            if(y + dy < ballRadius) {
              dy = -dy;
            }
            else if(y + dy > canvas.height - ballRadius) {
              if(x > paddleX && x < paddleX + paddleWidth) {
                dy = -dy;
              }
              else {
                lives --;
                if(!lives) {
                  alert("GAME OVER");
                  document.location.reload();
                }
                else {
                  x = canvas.width / 2;
                  y = canvas.height -30;
                  dx = 2;
                  dy = -2;
                  paddleX = (canvas.width - paddleWidth) / 2;
                }
              }
            }

            if(x + dx < ballRadius || x + dx > canvas.width - ballRadius) {
              dx = -dx;
            }

            if(rightPressed) {
              paddleX += 7;
              if(paddleX + paddleWidth > canvas.width) {
                paddleX = canvas.width - paddleWidth;
              }
            }
            else if(leftPressed) {
              paddleX -= 7;
              if(paddleX < 0) {
                paddleX = 0;
              }
            }
            // Appeler draw à chaque nouvelle image (fréquence gérée par le navigateur)
            requestAnimationFrame(draw);
          }
        </script>
      </div>

    </section>
    <footer>
      <p>Réalisé par <a href="mailto:robin.clerc@gmail.com">Robin Clerc</a> sous <a href="https://www.gnu.org/licenses/gpl-3.0.html">licence GPLv3</a>. <a href="https://github.com/faasoa/UOR">Code source</a>. <a href="http://icons8.com">Crédits favicon</a>. <a href="font/OFL.txt">Licence police</a>. <a href="http://validator.w3.org/check/referer" referrerpolicy="unsafe-url">Validation HTML</a>. <a href="http://jigsaw.w3.org/css-validator/check/referer" referrerpolicy="unsafe-url">Validation CSS</a>.</p>
    </footer>
  </body>
</html>